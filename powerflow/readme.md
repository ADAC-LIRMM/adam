ADD The following PATHs to your bashrc to get access to the different tools : 

```
# User specific aliases and functions
export CMOS28FDSOI_DIR="/tools/DKits/ST/cmos28fdsoi_10a"

export SNPS_SYN_PATH="/prog/Synopsys/2022/syn/T-2022.03-SP4"
export PATH="$SNPS_SYN_PATH/bin:$PATH"

export SNPS_PWR_PATH="/prog/Synopsys/2019/pwr/O-2018.06-SP5"
export SYNOPSYS_LC_ROOT="$SNPS_PWR_PATH"
export PATH="$SNPS_PWR_PATH/bin:$PATH"

export MODELSIM_PATH="/prog/Mentor/2019/ModelSim_SE/modeltech"
#export PATH="$MODELSIM_PATH/bin:$PATH"

export QUESTA_PATH="/prog/Mentor/2024/questasim"
export PATH="/prog/Mentor/2024/questasim/linux_x86_64:$PATH"

export LM_LICENSE_FILE="5280@mentor.cnfm.fr"
export SNPSLMD_LICENSE_FILE="27000@synopsys.cnfm.fr"

export XILINX_PATH=/prog/Vitis_Vivado_2023.2
export PATH=$XILINX_PATH/Vivado/2023.2/bin:$PATH
``` 
Scripts and how to use them :

**sim/scripts/adam.makefile :**

- Launches the behavioural simulation : 
    - Update your instr_rom.sv everytime you change the software
    - in sim/bhv/my_adam_tb.sv you can control when to start recording the information regarding memory accesses
    - You can define the runtime duration at the top of the file with the ***RUNTIME*** variable.
    - If you want to launch the graphic interface and observe waveforms add -gui -do $(WAVE) to the vsim command (line 27)

**sim/scripts/mem_parse.py:**

- Parses the csv files generated by the above script. You need to specify the path of such files and the interval (in ps) during which you want to count memory accesses

**sim/scripts/adam_ps.py:**

- Launches the post synthesis simulation : 
    - You need to have ran the synthesis flow before by running the /powerflow/scripts/synth.tcl script
- Uses the sim/bhv/ps_adam_tb.sv testbench. In this testbench we also generate the vcd file needed for primepower. You can specify the period during which you want to save the data for the power analysis using $dumpon and $dumpoff. Example : Starts recording for 100Âµs then stops
    ``
    $dumpon
    #100000 
    $dumpoff
    ``

**powerflow/scripts/synth.tcl:**
- Launches the synthesis flow using : dc_shell -f synth.tcl
- Generates the netlist used for the post-synthesis simulation
- You can control the clock frequency inside the script

**powerflow/scripts/power.tcl:**
- Launches the power script
- This script also launches the post-simulation testbench inorder to get the vcd file and then generate the waveform at the same time, which saves time and space. If you wish to do them both seperately, remove the -pipe option.

**powerflow/scripts/pp_parser.py:**
- This script parses the waveform generated by the previous script.
- You can target specific part of the design : here is how to use it 
`python3 pp_parser.py Path_to_waveform.out 1 -o Path_to_outputfolder -t name_of_csv:the_module_you_want_to_estimate_its_power_consumption`
- Here is an example of those parts : 
    - hsdom_cpu:adam_unwrap/adam/genblk4_0__hsdom_cpu
    - dnn_if_stage:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/core_i/if_stage_i
    - dnn_lsu_stage:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/core_i/load_store_unit_i
    - dnn_id_stage:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/core_i/id_stage_i
    - dnn_ex_stage:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/core_i/ex_stage_i
    - id_ictrl:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/core_i/id_stage_i/int_controller_i
    - id_regfile:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/core_i/id_stage_i/register_file_i
    - id_ctrl:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/core_i/id_stage_i/controller_i
    - id_dcd:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/core_i/id_stage_i/decoder_i
    - fpu:adam_unwrap/adam/genblk4_0__hsdom_cpu/cv32e40p_top/fpu_gen_fp_wrapper_i
    - lsdom_cpu:adam_unwrap/adam/genblk1_lsdom_lpcpu
    - total_fabric:adam_unwrap/adam/adam_fabric
    - lsdom_fabric:adam_unwrap/adam/adam_fabric/adam_fabric_lsdom
    - hsdom_fabric:adam_unwrap/adam/adam_fabric/adam_fabric_hsdom

**powerflow/scripts/pp_parser.py:**

- Launches a python script the retrieve the data generated in the csv generated with the previous script.
- Gives the total/leakage/internal/switching power consumption of your previously chosen component during an interval you specify


# How I use the scripts : 
- Launch synth.tcl only once if you don't have the netlist generated (you have to run it again if you change clock frequency)
- Update your instr_rom.sv if needed
- Launch the adam.makefile script and get your informations about memory accesses
- Launch mem_parse.py to get the total number of accesses
- Launch power.tcl script and generate your waveform file
- Launch pp_parser.py to parse the waveform file with the component of your choice
- Launch parse_csv.py to get the final power consumption of your component
